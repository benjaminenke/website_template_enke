{{ define "main" -}}
<h2 style="margin:0 0 10px;" id="bio">Bio</h2>
{{ with .GetPage "/sections/aboutme.md" }}
{{ .Content }}
{{ end }}


{{ with .GetPage "/sections/contact.md" }}
<hr>
<h2 id="contact">Contact</h2>
{{ .Content }}
{{ end }}

{{ with .GetPage "/sections/office-hours.md" }}
<hr>
<h2 id="officehours">Office Hours</h2>
{{ .Content }}
{{ end }}

{{ $scratch := newScratch }}
{{ $scratch.Set "pubcnt" 0 }}

{{ with .Site.Data.review_and_perspectives }}
<hr>
<h2 style="margin:20px 0 10px;" id="workinprogress">Reviews and Perspectives</h2>
{{ range . }}
{{ range .works }}
{{ partial "publication.html" (dict "context" . "pid" ($scratch.Get "pubcnt")) }}
{{ $scratch.Add "pubcnt" 1 }}   
{{ end }}
{{ end }}
{{ end }}


{{ with .Site.Data.publications }}
<hr>
<h2 style="margin:20px 0 10px;" id="publications">Publications</h2>
{{ range . }}
{{ range .works }}
{{ partial "publication.html" (dict "context" . "pid" ($scratch.Get "pubcnt")) }}
{{ $scratch.Add "pubcnt" 1 }}   
{{ end }}
{{ end }}
{{ end }}


{{ with .Site.Data.working_papers }}
<hr>
<h2 style="margin:20px 0 10px;" id="workingpapers">Working Papers</h2>
{{ range . }}
{{ range .works }}
{{ partial "publication.html" (dict "context" . "pid" ($scratch.Get "pubcnt")) }}
{{ $scratch.Add "pubcnt" 1 }}   
{{ end }}
{{ end }}
{{ end }}


{{ with .GetPage "/sections/from-another-life.md" }}
<hr>
<h2 id="fromanotherlife">From Another Life</h2>
{{ .Content }}
{{ end }}

{{ with .GetPage "/sections/personal.md" }}
<hr>
<h2 id="personal">Personal</h2>
{{ .Content }}
{{ end }}

{{ .Content }}
{{- end }}
